---
title: "Next jsをGitHub PageにデプロイしたときにNext/linkが正しく動くようにする"
emoji: "🚀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["nextjs", "github","githubactions","githubpages"]
published: false
---

# 状況
Nextjs のプロジェクトでGitHub Pagesにデプロイし 下のようなコードを書いた時に `https://aaaaaaaaaaaaaa.github.io/bbbbbbbbbbbb/page1`に遷移してほしいのに `https://aaaaaaaaaaaaaa.github.io/page1/`に遷移してしまう。
```tsx
<Link href="/page1">
  <a>リンク</a>
</Link>
```

# 解決策

## GitHub側

GitHubの`Settings > Environments`から `github-pages`を選んで 環境変数名には`BASE_PATH`、`value`には`/<Github Pagesのリポジトリ名>`を入力する

## Next.js側

`next.config.js`でこのように設定します。これを入力してから、もう一度ビルドすると正しくページが遷移するようになります。

```js:next.config.js
module.exports = {
  trailingSlash: true,
  assetPrefix: process.env.BASE_PATH || '',
  basePath: process.env.BASE_PATH || '',
}
```