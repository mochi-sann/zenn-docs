---
title: "Misskeyã® mfm ã®reactã®ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã‚’ä½œã£ãŸ"
emoji: "ğŸŒˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "misskey"]
published: true
---

ã“ã‚Œã¯[Misskey Advent Calendar 2025](https://adventar.org/calendars/11291) 18 æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

---

# ã¯ã˜ã‚ã«

ã“ã‚“ã«ã¡ã¯ã€‚ãŠä¸€äººæ§˜ã‚µãƒ¼ãƒãƒ¼ã®[ ã‚‚ã¡ã™ããƒ¼ ](https://misskey.mochi33.com/)ã‚’é‹å–¶ã—ã¦ã„ã‚‹ mochi ã§ã™ã€‚

è‡ªåˆ†ãŒä½œã£ã¦ã„ã‚‹ Misskey ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«ã®ãŸã‚ã«ä½œã£ãŸ MFM ã® React ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆãŸã®ã§ãã®ç´¹ä»‹ã‚’ã—ã¾ã™ã€‚

https://www.npmjs.com/package/mfm-react-render
ã“ã®ç”»åƒã®ã‚ˆã†ã« React ã® MFM ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
![](/images/ddddddd.png)

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¨ä½¿ã„æ–¹

ä½¿ã„æ–¹ã¯ `mfm-react-render` ã‚’è¿½åŠ ã—ã€

```bash
npm add mfm-react-render
```

ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚’ import ã™ã‚‹ã“ã¨ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚ã¾ã™

```tsx
import { Provider } from "jotai";
import { Mfm } from "mfm-react-render";
import "mfm-react-render/style.css";
import "katex/dist/katex.min.css";

export function App() {
  return (
    <Provider>
      <Mfm
        text="$[tada **Hello**] ğŸ‰"
        emojis={{ party: "https://example.com/party.webp" }}
      />
    </Provider>
  );
}
```

MFM ã® props ã«

```ts
export type MfmBasicProps = {
  plain?: boolean;
  nowrap?: boolean;
  nyaize?: boolean;
  host?: string;
  emojis?: { [key: string]: string } | undefined;
};
```

ã“ã‚Œã‚‰ã®è¨­å®šã‚’æ²¸ã‹ã™ã“ã¨ã§ plan ã‚’è¨­å®šã—ãŸã‚Š cat ã¨ã—ã¦å‡¦ç†ã‚’ã—ãŸã‚Šã€ã‚«ã‚¹ã‚¿ãƒ çµµæ–‡å­—ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã™ã€‚
Provider ã«ã¯
https://github.com/mochi-sann/mi-deck/blob/9b873d80a6781eaa631359c971e508c9e32ac532/packages/react-mfm/src/index.tsx#L43-L57
ã¾ãŸ Provider ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§é«˜åº¦ãªãªã‚¹ã‚¿ã‚¤ãƒ«ä»˜ã‘ã‚’ç„¡åŠ¹åŒ–ã—ãŸã‚Š animation ã‚’ç„¡åŠ¹åŒ–ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™.
ã€‚
è©¦ã—ã¦ã¿ãŸã„ã¨ãã«ã¯
https://sb.mideck.mochi33.com/?path=/story/features-mfm-mfmtext--basic
ã§ãã‚Œãã‚Œã®ä½¿ã„æ–¹ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚(ãªã«ã‹ã†ã¾ãå‹•ã„ã¦ãªã„ã‚‚ã®ãŒã‚ã£ãŸã‚‰ github ã« issue ãŒæ¬²ã—ã„ã§ã™)

ç§ã¯ä»Š React ã§ misskey ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‚’åˆ¶ä½œã—ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã« React ã® MFM ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ãã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã«ãªã‚Šã¾ã—ãŸã€‚

ãªã«ã‹ãªã„ã‹ã¨æ¢ã—ã¦ã¿ã‚‹ã¨
https://github.com/yamader/react-mfm
ãŒã‚ã‚Šã¾ã—ãŸãŒæ©Ÿèƒ½ãŒä¸€éƒ¨ã—ã‹å®Ÿè£…ã•ã‚Œã¦ãŠã‚‰ãšè‡ªåˆ†ã§ã—ã¦ä¸è¶³ã—ã¦ã„ã‚‹é–‹ç™ºã—ã¾ã—ãŸã€‚

# æŠ€è¡“ãƒ¡ãƒ¢

## ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã«ã¤ã„ã¦

åŸºæœ¬çš„ã« misskey æœ¬ä½“ã® mfm ã®å‹•ãã¨åŒã˜ã‚ˆã†ã«å‹•ãã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã—ãŸã€‚ãã®ãŸ CSS ã¯åŸºæœ¬çš„ã«ã‚‚ã¨ã®ã¨åŒã˜ã‚‚ã®ã‚’ä½¿ã†ã®ãŒä¸€ç•ªæ‰‹ã£å–ã‚Šæ—©ãç¢ºå®Ÿã§ã™ã€‚

https://github.com/misskey-dev/misskey/blob/260dbd150b2988c0c6931a4b23c611d2ba0047bf/packages/frontend-embed/src/components/EmMfm.ts
ã‚„
https://github.com/misskey-dev/misskey/blob/260dbd150b2988c0c6931a4b23c611d2ba0047bf/packages/frontend/src/style.scss#L614-L756
ã‚’è¦‹ã¦ãã¦å®Ÿè£…ã—ã¾ã—ãŸ

## ãƒ‘ãƒ¼ã‚¹ã®æ–¹æ³•

ä¸­èº«ã®å®Ÿè£…ã¨ã—ã¦ã¯ mfm ã®ãƒ‘ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã® mfm-js ã§æ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã¨ Object ãŒè¿”ã£ã¦ãã‚‹ã®ã§ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã„ã„æ„Ÿã˜ã«ã“ã­ãã‚Šå›ã—ã¦ä½œæˆã—ã¦ã„ã¾ã™ã€‚

https://github.com/mochi-sann/mi-deck/blob/9b873d80a6781eaa631359c971e508c9e32ac532/packages/react-mfm/src/index.tsx?plain=1#L23

## ã‚³ãƒ¼ãƒ‰åŸ‹ã‚è¾¼ã¿

https://github.com/mochi-sann/mi-deck/blob/9b873d80a6781eaa631359c971e508c9e32ac532/packages/react-mfm/src/components/Code.tsx

mfm ã¯ã‚³ãƒ¼ãƒ‰åŸ‹ã‚è¾¼ã¿ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»Šå›ã¯ shiki js ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚ ãŸã æ„šç›´ã«å®Ÿè£…ã—ã¦ã—ã¾ã†ã¨ã€‚å¯¾å¿œã—ã¦ã„ã‚‹è¨€èªã®ãƒ‘ãƒ¼ã‚µãƒ¼ãŒå¤§ãããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ã“ã®å¯¾ç­–ã¨ã—ã¦ã‚´ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆã§ä½¿ç”¨ã•ã‚ŒãŸè¨€èªã ã‘ã®è¨€èªãƒ‘ãƒ¼ã‚µãƒ¼ã‚’éšæ™‚èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

<!-- ç§ã¯ React ã‚’ä½¿ã£ã¦ãƒãƒ«ãƒã‚µãƒ¼ãƒãƒ¼ã® Misskey ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚ -->
<!---->
<!-- ![image](/images/image_mideck.png) -->
<!---->
<!-- ã“ã‚Œã«ä½¿ã†ãŸã‚ã« mfm ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã¾ã—ãŸã€‚ -->
