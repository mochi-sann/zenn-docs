---
title: "solidjs ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§storybookã‚’ä½¿ã†"
emoji: "ğŸ“™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["solidjs", "storybook", "typescript"]
published: false
---

# ã¯ã˜ã‚ã«

solidjs ã¯å…¬å¼ã§ storybook ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
ã§ã™ãŒã€ config ãªã©ã‚’è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ Solidjs ã‚’ storybook ã§ä½¿ãˆã‚‹ã®ã§ãã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã‚’æ›¸ã„ã¦ãã¾ã™ã€‚

# å®Œæˆå“

https://github.com/mochi-sann/solid-js-storybook

# æ‰‹é †

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
npx degit solidjs/templates/ts solid-js-app
cd solid-js-app
yarn i
yarn dev
```

## storybook ã§è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆ

storybook ã§è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã“ã“ã§ã¯ãƒœã‚¿ãƒ³ Component ã¨ã—ã¦`src/components/myButton.tsx`ã¨ storybook ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®`src/components/MyButton.stories.tsx`ã‚’ä½œæˆã—ã¾ã™ã€‚

```tsx : src/components/myButton.tsx
import { Component } from "solid-js";
export type MyButtonProps = {
  name: string;
};
const MyButton: Component<MyButtonProps> = (props) => {
  return (
    <button
      style={{
        "background-color": "#0000FF",
        color: "#FFFFFF",
      }}
    >
      ãƒœã‚¿ãƒ³ : {props.name}
    </button>
  );
};
export default MyButton;
```

ã“ã“ã§ã¯ãƒœã‚¿ãƒ³ã‚’åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ãƒœã‚¿ãƒ³ã‚’é’è‰²ã«ã—ã¦ã„ã¾ã™ã€‚

```tsx : src/components/MyButton.stories.tsx
import MyButton from "./MyButton";
export default {
  title: "MyButton",
};
export const Default = () => <MyButton name={"NAME"} />;
```

storybook ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã€‚

## storybook ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npx sb init
```

ã‚’å…¥åŠ›ã—ãŸã‚‰

```bash
? Do you want to manually choose a Storybook project type to install? â€º (y/N)
```

ã¨æ‰‹å‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‹èã‹ã‚Œã‚‹ã®ã§`y`ã‚’æŠ¼ã—ã¾ã™

```bash
? Please choose a project type from the following list: â€º - Use arrow-keys. Return to submit.
```

ã¨ storybook ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—ã‚’èã‹ã‚Œã‚‹ã®ã§ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦`html`ã‚’é¸æŠã—ã¾ã™ã€‚

## storybook ã®è¨­å®šã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

ã„ã¾ã®è¨­å®šã®ã¾ã¾ã§ã¯ Solidjs ã® Component ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‹•ä½œã—ãªã„ã®ã§è¨­å®šã‚’ä¿®æ­£ã—ã¾ã™ã€‚
æœ€åˆã¯ã€Storybook ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã¨ãã«ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹`src/stories`ã‚’å‰Šé™¤ã—ã¾ã™ã€‚
ã¤ãã«`.storybook/main.js`ã‚’æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚

```js diff  :.storybook/main.js
module.exports = {
  stories: ["../src/**/*.stories.mdx", "../src/**/*.stories.@(js|jsx|ts|tsx)"],
  addons: ["@storybook/addon-links", "@storybook/addon-essentials"],
-  "framework": "@storybook/html"
};
```

`.storybook/preview.js`ã‚‚ä¿®æ­£ã€‚

```js diff :.storybook/preview.js
-export const parameters = {
-  actions: { argTypesRegex: "^on[A-Z].*" },
-  controls: {
-    matchers: {
-      color: /(background|color)$/i,
-      date: /Date$/,
-    },
-  },
-}

+import { createRoot } from "solid-js";
+import { insert, template, createComponent } from "solid-js/web";
+import { GLobalStyle } from "../src/components/system/global";
+export const decorators = [
+  (Story) =>
+    createRoot(() => {
+      // Wrap the component in a <div> tag.
+      GLobalStyle;
+      const el = template(`<div></div>`, 2).cloneNode(true);
+      insert(el, createComponent(Story, {}));
+      return el;
+    }),
+];
```

## Babel ã®è¨­å®š

storybook ã«ä½¿ã‚ã‚Œã‚‹ bable.js ã« Solid ãƒ—ãƒªã‚»ãƒƒãƒˆã‚‚è¿½åŠ ã—ã¾ã™

```bash
yarn add -D babel-preset-solid
```

`.babelrc`ã‚’ä½œæˆã—ã¦ä¸‹ã®æ§˜ã«æ›¸ãã¾ã™

```js :.babelrc
{
  "presets": ["solid"]
}
```

## å®Œæˆ

ã“ã‚Œã§

```bash
yarn run storybook
```

ã‚’å®Ÿè¡Œã—ãŸã‚‰ç”»åƒã®æ§˜ã« Component ãŒ storybook ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
![storybookã®ç”»åƒ](https://storage.googleapis.com/zenn-user-upload/a0614d32b6f7-20220115.png)

# å‚è€ƒã«ã—ãŸã‚µã‚¤ãƒˆãªã©

https://github.com/Launch-AI/launch-solid-ui

https://github.com/solidjs/solid/pull/81/commits/34c6a188d045ebd65b7deecc9c7b861c14687315
